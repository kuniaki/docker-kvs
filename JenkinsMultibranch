import hudson.tasks.test.AbstractTestResultAction
import hudson.model.Actionable
import hudson.tasks.junit.CaseResult
import hudson.util.DescribableList
import hudson.slaves.EnvironmentVariablesNodeProperty
import jenkins.model.Jenkins

properties(
    [
        parameters([
          string(name: 'branch', defaultValue: 'main', description: 'branch', ), string(name: 'node', defaultValue: 'Slave1', description: 'Jenkins Node Name', ),
          string(name: 'production', defaultValue: 'asahitestapp.eastus.cloudapp.azure.com', description: 'Production', ),
        ])
    ]
)


def now = new Date()
def TIME_STAMP = now.format("yyMMdd.HHmm", TimeZone.getTimeZone('UTC'))
def test_stage = '1'



node(node) {

  stage('init') (
    cleanWs()
  }

  stage('checkout') (
    checkout scm
    sh 'echo $BRANCH_NAME'

    if (env.BRANCH_NAME == 'master') {
       stage 'Only on master'
       println 'This happens only on master test4'
    } else {
       stage 'Other branches'
       println "Current branch ${env.BRANCH_NAME}"
    }
 )
}
}
